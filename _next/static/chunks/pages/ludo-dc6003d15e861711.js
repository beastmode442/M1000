(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{9082:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ludo",function(){return n(4304)}])},6858:function(e,t,n){"use strict";n.d(t,{Z:function(){return battles_filter}});var i,r,a,l,s=n(1527),o=n(959),c=n(8519),d=n(3837),u=n(1644);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var blue_coin_mini=function(e){return o.createElement("svg",_extends({width:21,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=o.createElement("circle",{cx:10.598,cy:11.119,r:8.16,fill:"#2967E0",stroke:"#5182E1",strokeWidth:4.115,strokeDasharray:"7.64 7.64"})),r||(r=o.createElement("circle",{cx:10.598,cy:11.12,r:6.072,fill:"#5182E1",stroke:"#2967E0",strokeWidth:1.764})))},h=n(7210);function red_coin_mini_extends(){return(red_coin_mini_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var red_coin_mini=function(e){return o.createElement("svg",red_coin_mini_extends({width:21,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=o.createElement("circle",{cx:10.682,cy:11.119,r:8.16,fill:"#D74467",stroke:"#C7234A",strokeWidth:4.115,strokeDasharray:"7.64 7.64"})),l||(l=o.createElement("circle",{cx:10.682,cy:11.12,r:6.072,fill:"#D74467",stroke:"#C7234A",strokeWidth:1.764})))},f=n(6131),m=n(4156),b=n.n(m),battles_filter=function(e){let{battlesCount:t,gameName:n,showJoinable:i,handleCreateBattle:r,setShowJoinable:a,showTotalValue:l,showCoins:o}=e,m=(0,f.L)(e=>e.globalUser),p=(0,f.a)(e=>e.setShowLogin);return(0,s.jsxs)("div",{className:b().filterWrapper,children:[(0,s.jsxs)("div",{className:b().filterWrapperLeft,children:[!!l&&(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Z,{style:{marginRight:10}})," ",l," Value"]}),(0,s.jsxs)("div",{children:[t," ",1==t?"public battle":"public battles"]}),(0,s.jsxs)("div",{className:b().filterWrapperLeftSwitchWrapper,children:[(0,s.jsx)(u.Z,{element:"p",textType:"label",children:"Show Joinable"}),(0,s.jsx)(d.Z,{checked:i,onChange:()=>{localStorage.setItem("show_joinable",JSON.stringify(!i)),a(!i)}})]})]}),(0,s.jsxs)("div",{className:b().filterWrapperRight,children:[o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(blue_coin_mini,{}),(0,s.jsx)("p",{children:" 55 %"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(red_coin_mini,{}),(0,s.jsx)("p",{children:" 45 %"})]})]}),(0,s.jsxs)(c.Z,{className:b().filterWrapperRightBtn,variant:"primary",onClick:()=>{(null==m?void 0:m.id)?r():p({forceUserPass:!1,visible:!0})},children:["Create ",n," Battle"]})]})]})}},4304:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ludo}});var i=n(1527),r=n(6284),a=n(959),l=n(462),s=n(2524),o=n(6858),c=n(7572),d=n(6131),u=n(896),h=n(4641),f=n(8863);let m={name:"Ludo",info:"Players roll the dice and move on the board according to the number rolled. The first player to reach the finish line wins!"};function Ludo(){let e=(0,r.useRouter)(),t=(0,d.L)(e=>e.globalUser),n=a.useMemo(()=>(0,h.P)("margin"),["margin"]),l=(0,d.a)(e=>e.setShowModal),[b,p]=(0,a.useState)([]),[g,_]=(0,a.useState)(!1),E=(0,d.a)(e=>e.setShowLogin),addNewBattle=e=>{p(t=>[e,...t])},battleJoined=e=>{p(t=>{let n=[...t],i=t.findIndex(t=>{let{id:n}=t;return n===e.battleId});return -1!==i?(n[i].players.push(e.player),n):t})},handleBattleEnd=e=>{p(t=>t.filter(t=>{let{id:n}=t;return n!==e}))},fetchInitialData=async()=>{var e;let{data:t}=null!==(e=await (0,u.Uk)("ludo"))&&void 0!==e?e:{};p(t)};(0,a.useEffect)(()=>(f.Wb.emit("JOIN-ROOM","GENERAL-LUDO"),f.Wb.on("NEW_LUDO_BATTLE",addNewBattle),f.Wb.on("ADD_MEMBER",battleJoined),f.Wb.on("LUDO_REMOVE_BATTLE",handleBattleEnd),fetchInitialData(),()=>{f.Wb.off("NEW_LUDO_BATTLE"),f.Wb.off("ADD_MEMBER"),f.Wb.off("LUDO_REMOVE_BATTLE")}),[]);let joinFromOutside=n=>{(null==t?void 0:t.id)?(e.push("/ludo/".concat(n)),setTimeout(()=>{f.Wb.emit("JOIN_LUDO_BATTLE",n)})):E({forceUserPass:!1,visible:!0})};return b?(0,i.jsxs)("div",{className:"battle-list",children:[(0,i.jsx)(c.Z,{gameInfo:m.info,gameName:m.name,withButtons:!1,gameBanner:void 0,isAdmin:!1,refundData:{gameMode:"LUDO",battleId:0}}),(0,i.jsx)(o.Z,{setShowJoinable:_,showJoinable:g,battlesCount:b.length,gameName:m.name,handleCreateBattle:function(){l("createLudoBattle",!0),setTimeout(()=>{document.body.style.overflow="hidden",document.body.style.paddingRight=n.gap+"px"},0)}}),b.length?(0,i.jsx)("div",{className:"battles-grid",children:(g?b.filter(e=>{let{spots:t,players:n}=e;return n.length<t}):b).map((e,t)=>(0,i.jsx)(s.Z,{style:{animation:"bottomTop ".concat(.2+.15*t,"s")},gameMode:"Ludo",gameData:e,isFull:e.players.length===e.spots,handleJoinFromOutside:joinFromOutside},e.id))}):(0,i.jsxs)("h1",{className:"empty-state-battle",children:["There are no battles right now, you can create one in top right"," "]})]}):(0,i.jsx)("h1",{children:"\uD83D\uDEE0BATTLE NOT FOUND, THIS IS MAYBE BECAUSE IT WAS DELETED... \uD83D\uDEA7"})}Ludo.getLayout=e=>(0,i.jsx)(l.Z,{children:e})}},function(e){e.O(0,[83,462,748,774,888,179],function(){return e(e.s=9082)}),_N_E=e.O()}]);