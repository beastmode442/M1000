(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{1297:function(e,t,a){"use strict";var s,l,r=a(959);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",_extends({width:14,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=r.createElement("path",{d:"M6.772 6.755a1.695 1.695 0 1 0 0-3.39 1.695 1.695 0 0 0 0 3.39Z",fill:"#5E6876"})),l||(l=r.createElement("path",{d:"M13.103 4.916A7.071 7.071 0 0 0 6.773.4 7.072 7.072 0 0 0 .441 4.916a.424.424 0 0 0 0 .288 7.072 7.072 0 0 0 6.33 4.517 7.072 7.072 0 0 0 6.33-4.517.423.423 0 0 0 0-.288Zm-6.33 2.899a2.754 2.754 0 1 1 0-5.509 2.754 2.754 0 0 1 0 5.509Z",fill:"#5E6876"})))}},6870:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/case-battles",function(){return a(2102)}])},3837:function(e,t,a){"use strict";a.d(t,{Z:function(){return Switcher}});var s=a(1527),l=a(2187),r=a.n(l);a(959);var n=a(6654),i=a.n(n);function Switcher(e){let{className:t,...a}=e;return(0,s.jsx)("input",{type:"checkbox",className:r()(i().switcher,t),...a})}},7523:function(e,t,a){"use strict";a.d(t,{Z:function(){return battle_filter_v2}});var s,l,r=a(1527),n=a(959),i=a(8519),c=a(3837),o=a(2187),d=a.n(o);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var multiplayer=function(e){return n.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:14,fill:"none"},e),s||(s=n.createElement("path",{d:"M4.842 6.741c.796 0 1.56-.306 2.123-.852.563-.545.88-1.285.88-2.056 0-.772-.317-1.512-.88-2.057A3.052 3.052 0 0 0 4.842.924c-.797 0-1.56.306-2.123.852a2.863 2.863 0 0 0-.88 2.057c0 .77.317 1.51.88 2.056a3.052 3.052 0 0 0 2.123.852Zm6.755 0c.598 0 1.17-.23 1.593-.639.422-.409.66-.964.66-1.542 0-.579-.238-1.134-.66-1.543a2.29 2.29 0 0 0-1.593-.639c-.597 0-1.17.23-1.592.64-.422.408-.66.963-.66 1.542 0 .578.238 1.133.66 1.542.422.41.995.64 1.592.64ZM2.215 8.196c-1.036 0-1.877.814-1.877 1.818 0 0 0 3.272 4.504 3.272 3.57 0 4.31-2.057 4.463-2.909.04-.223.04-.364.04-.364 0-1.003-.84-1.817-1.876-1.817H2.215Zm8.626 2.327a3.742 3.742 0 0 1-.135.779 4.13 4.13 0 0 1-.514 1.113c.46.1.932.148 1.404.144 3.753 0 3.753-2.545 3.753-2.545 0-1.004-.84-1.818-1.877-1.818h-3.196c.36.52.57 1.144.57 1.818v.363l-.005.146Z",fill:"#C2C2C2"})))};function singleplayer_extends(){return(singleplayer_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var singleplayer=function(e){return n.createElement("svg",singleplayer_extends({xmlns:"http://www.w3.org/2000/svg",width:11,height:14,fill:"none"},e),l||(l=n.createElement("path",{d:"M9.104 8.135a1.545 1.545 0 0 1 1.545 1.545v.368c0 1.842-2.168 3.237-5.15 3.237s-5.15-1.322-5.15-3.237V9.68a1.545 1.545 0 0 1 1.545-1.545h7.21ZM5.499.925a3.09 3.09 0 1 1 0 6.18 3.09 3.09 0 0 1 0-6.18Z",fill:"#C2C2C2"})))},_=a(1480),h=a.n(_),mutiplayer_tabs=function(e){let{tabsContent:t=[],currentTab:a,setCurrentTab:s,className:l}=e;return(0,r.jsxs)("div",{className:d()(h().Tabs,l,h().multiPlayerOnes),children:[(0,r.jsx)("span",{className:h().TabsActive,style:{width:"".concat(100/t.length,"%"),left:"".concat(100/t.length*t.indexOf(a),"%")}}),t.map((e,l)=>(0,r.jsxs)("button",{style:a===e?{color:"#F2F2F2",width:"".concat(100/t.length,"%")}:{width:"".concat(100/t.length,"%")},onClick:()=>s(t=>({...t,tabName:e})),children:["Multiplayer"===e?(0,r.jsx)(multiplayer,{}):(0,r.jsx)(singleplayer,{}),e]},l))]})},m=a(1644),b=a(6131),u=a(4156),p=a.n(u),battle_filter_v2=function(e){let{battlesCount:t,gameName:a,showJoinable:s,handleCreateBattle:l,setShowJoinable:n,setCurrentTab:o,currentTab:d,showTotalValue:_}=e,h=(0,b.L)(e=>e.globalUser),u=(0,b.a)(e=>e.setShowLogin);return(0,r.jsxs)("div",{className:p().filterWrapperV2,children:[(0,r.jsx)("div",{className:p().tabsContainer,children:(0,r.jsx)(mutiplayer_tabs,{className:p().Tabs,currentTab:d.tabName,setCurrentTab:o,tabsContent:"Mines"!==a?["Multiplayer","SinglePlayer"]:["SinglePlayer","Multiplayer"]})}),"SinglePlayer"!=d.tabName&&(0,r.jsxs)("div",{className:p().filterWrapperRight,children:[(0,r.jsxs)("div",{className:p().filled,children:[(0,r.jsx)("span",{className:p().greenDot}),(0,r.jsxs)(m.Z,{element:"p",textType:"label",children:[t," ",1==t?"public battle":"public battles"]}),(0,r.jsx)("span",{className:p().greyDot}),(0,r.jsx)(m.Z,{element:"p",textType:"label",children:"Show Joinable"}),(0,r.jsx)(c.Z,{checked:s,onChange:()=>{localStorage.setItem("show_joinable",JSON.stringify(!s)),n(!s)}})]}),(0,r.jsxs)(i.Z,{className:p().btn,variant:"primary",onClick:()=>{(null==h?void 0:h.id)?l():u({forceUserPass:!1,visible:!0})},children:["Create ",a]})]})]})}},7572:function(e,t,a){"use strict";var s=a(1527),l=a(2187),r=a.n(l);a(959);var n=a(528),i=a(8519),c=a(1644),o=a(896),d=a(4156),_=a.n(d);t.Z=function(e){let{gameBanner:t,gameInfo:a,gameName:l,withButtons:d,isCreator:h,isFull:m,isJoined:b,isAdmin:u,handleCallBot:p,handleJoin:f,onJoinGame:x,refundData:g}=e,handleRefund=async()=>{try{await (0,o.th)(g.gameMode,g.battleId),n.ZP.success("Your game has successfully been refunded!")}catch(s){var e,t,a;n.ZP.error(null!==(a=null==s?void 0:null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)&&void 0!==a?a:"Failed to refund, contact support!")}};return(0,s.jsxs)("div",{className:_().gameInfoWrapper,children:[(0,s.jsxs)("div",{className:_().gameInfoLeft,children:[(0,s.jsx)("span",{className:r()(_().gameInfoLeftBanner,_()["".concat(l.replace(" ","-"),"-thumbnail")])}),(0,s.jsxs)("div",{className:_().gameInfoLeftText,children:[(0,s.jsx)(c.Z,{style:a.includes("[split_text]")?{marginBottom:"10px"}:{},element:"h1",textType:"heading",children:l}),(0,s.jsx)(c.Z,{element:"p",textType:"secondary",children:a.split("[split_text]")[0]}),(0,s.jsx)(c.Z,{style:{color:"#929aa6"},element:"p",textType:"secondary",children:a.split("[split_text]")[1]})]})]}),d&&(0,s.jsxs)("div",{className:_().gameInfoRight,children:[h&&!m?(0,s.jsx)(i.Z,{onClick:p,variant:"primary",children:"Call Bot"}):b?(0,s.jsx)(i.Z,{disabled:!0,variant:"primary",children:"Joined"}):m?(0,s.jsx)(i.Z,{disabled:!0,onClick:f,variant:"primary",children:"Game Full"}):(0,s.jsx)(i.Z,{onClick:f,variant:"primary",children:"Join Game"}),u?(0,s.jsx)(i.Z,{onClick:handleRefund,className:_().cashoutBtn,children:"Refund Battle"}):(0,s.jsx)(i.Z,{className:_().cashoutBtn,children:"Tutorial"})]})]})}},3423:function(e,t,a){"use strict";var s=a(1527),l=a(5005),r=a.n(l);t.Z=e=>{let{imgUrl:t,shadowColor:a,height:l,width:n,...i}=e;return(0,s.jsxs)("div",{className:r().shadowImgContainer,children:[(0,s.jsx)("span",{style:{backgroundColor:a},className:r().shadow}),(0,s.jsx)("span",{style:{backgroundImage:'url("'.concat(t,'")'),width:n,height:l},className:r().actualImg,...i})]})}},2102:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return CaseBattles}});var s,l=a(1527),r=a(2187),n=a.n(r),i=a(151),c=a.n(i),o=a(6284),d=a(252),_=a(959),h=a(528),m=a(462),b=a(7518),u=a.n(b),p=a(3423),f=a(2804),x=a(7371),g=a(584),v=a(6131),y=a(8863),j=a(8519),C=a(802),N=a(1512),w=a.n(N);function CreateCoinflipBattle(e){let{className:t,cases:a}=e,s=(0,v.a)(e=>e.createCoinflipBattle),r=(0,o.useRouter)(),i=(0,v.a)(e=>e.setShowModal),[c,m]=(0,_.useState)(!1),[b,N]=(0,_.useState)(""),[P,E]=(0,_.useState)(2),[I,L]=(0,_.useState)([]);function closeModal(){L([]),E(2),i("createCoinflipBattle",!1),document.body.style.overflow="initial",document.body.style.paddingRight="0px"}(0,_.useEffect)(()=>(y.Wb.on("CREATE_CASE_BATTLE_SUCCESS",e=>{let{battleId:t}=e;m(!1),h.ZP.success("Battle created successfully, good luck!!"),closeModal(),r.push("/case-battles/".concat(t))}),y.Wb.on("CREATE_CASE_BATTLE_FAIL",e=>{h.ZP.error(e),m(!1)}),()=>{y.Wb.off("CREATE_CASE_BATTLE_SUCCESS"),y.Wb.off("CREATE_CASE_BATTLE_FAIL")}),[]);let incrementCase=e=>{L(t=>{let a=t.findIndex(t=>{let{caseId:a}=t;return a==e});if(-1===a)return t;{let e=[...t];return e[a].quantity+=1,e}})},decrementCase=e=>{L(t=>{let a=t.findIndex(t=>{let{caseId:a}=t;return a==e});if(-1===a)return t;{let e=[...t];return e[a].quantity-=1,e}})},handleSelectCase=async(e,t)=>{let s=I.findIndex(t=>(null==t?void 0:t.caseId)==e);-1===s?L(s=>{var l;let r=null==a?void 0:null===(l=a.find(t=>{let{id:a}=t;return a==e}))||void 0===l?void 0:l.price;return[...s,{quantity:1,caseId:e,price:null!=r?r:0,uiIndex:t}]}):I[s].quantity<=0&&L(e=>{let t=[...e];return t[s].quantity=1,t})};return(0,l.jsxs)(u(),{isOpen:s,onRequestClose:closeModal,contentLabel:"Create Coinflip Battle modal",className:n()(w().defaultM,w().coinflipCreateB,t),closeTimeoutMS:100,children:[(0,l.jsx)("div",{className:w().coinflipCreateBClose,children:(0,l.jsx)(g.Z,{onClick:closeModal})}),(0,l.jsxs)("div",{className:w().coinflipCreateBContent,children:[(0,l.jsx)("div",{className:w().coinflipCreateBContentTitle,children:(0,l.jsx)("h1",{children:"Create Case Battle"})}),(0,l.jsx)("div",{className:w().coinflipCreateBContentSearch,children:(0,l.jsx)(C.Z,{onChange:e=>N(e.target.value),placeholder:"Search for a case",icon:(0,l.jsx)(x.Z,{})})}),(0,l.jsx)("div",{className:w().coinflipCreateBContentList,children:a&&a.filter(e=>{var t;let{name:a}=e;return""===b||a.toLowerCase().includes(null===(t=b.toLowerCase())||void 0===t?void 0:t.trim())}).sort((e,t)=>e.price-t.price).map((e,t)=>{let{price:a,thumbnailUrl:s,name:r,id:n}=e;return(0,l.jsxs)("div",{onClick:e=>{e.preventDefault(),handleSelectCase(n,t)},className:w().coinflipCreateBContentListItem,children:[I.map((e,t)=>{let{caseId:a,quantity:s}=e;return a==n&&s>0&&(0,l.jsxs)("div",{className:w().counterBox,children:[(0,l.jsx)(j.Z,{onClick:()=>{incrementCase(a)},children:"+"}),(0,l.jsx)("p",{children:s}),(0,l.jsx)(j.Z,{onClick:()=>decrementCase(a),children:"-"})]},t)}),(0,l.jsx)(p.Z,{height:150,width:150,imgUrl:s,shadowColor:"#2967E0"}),(0,l.jsx)("p",{className:w().name,children:r}),(0,l.jsxs)("div",{className:w().priceDiv,children:[(0,l.jsx)(f.Z,{}),(0,l.jsx)("p",{children:(0,d.s)(a)})]})]},n)})}),(0,l.jsxs)("div",{className:w().coinflipCreateBContentBottom,children:[(0,l.jsxs)("div",{className:w().leftSide,children:[(0,l.jsxs)("div",{className:w().players,children:[(0,l.jsx)("p",{children:"Players"}),(0,l.jsx)(j.Z,{onClick:()=>E(2),className:n()(w().btn,2==P&&w().active),children:"2"}),(0,l.jsx)(j.Z,{onClick:()=>E(3),className:n()(w().btn,3==P&&w().active),children:"3"}),(0,l.jsx)(j.Z,{onClick:()=>E(4),className:n()(w().btn,4==P&&w().active),children:"4"})]}),(0,l.jsxs)("div",{className:w().casesCount,children:[(0,l.jsx)("label",{children:"Cases"}),(0,l.jsx)("p",{children:a&&I.reduce(function(e,t){return e+t.quantity},0)})]}),(0,l.jsxs)("div",{className:w().totalCost,children:[(0,l.jsx)("label",{children:"Total Cost"}),(0,l.jsxs)("div",{className:w().priceDiv,children:[(0,l.jsx)(f.Z,{}),(0,l.jsx)("p",{children:(0,d.s)(I.reduce(function(e,t){return e+t.quantity*t.price},0))})]})]})]}),(0,l.jsx)("div",{className:w().buttonSide,children:(0,l.jsx)(j.Z,{disabled:c,onClick:()=>{y.Wb.emit("CREATE_CASE_BATTLE",{maxPlayers:P,cases:I.filter(e=>{let{quantity:t}=e;return t>0})}),m(!0)},variant:"primary",children:c?"Creating...":"Create Case battle"})})]})]})]})}var P=a(7523),E=a(7572),I=a(3623),L=a(1644);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var btn_user=function(e){return _.createElement("svg",_extends({width:13,height:15,viewBox:"0 0 8 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=_.createElement("path",{d:"M4.206 5.083c.606 0 1.187-.233 1.616-.648.428-.415.669-.978.669-1.565s-.24-1.15-.67-1.565A2.323 2.323 0 0 0 4.207.656c-.606 0-1.187.233-1.615.649-.429.415-.67.978-.67 1.565s.241 1.15.67 1.565c.428.415 1.01.648 1.615.648ZM2.207 6.189c-.788 0-1.428.62-1.428 1.384 0 0 0 2.49 3.427 2.49 2.717 0 3.28-1.565 3.396-2.214.031-.169.031-.276.031-.276 0-.764-.64-1.384-1.428-1.384H2.207Z",fill:"#fff",fillOpacity:.4})))},S=a(1297),T=a(5005),Z=a.n(T),battle_item=e=>{let{gameData:t,handleJoinFromOutside:a,isFull:s,...r}=e,[i,o]=(0,_.useState)(!1),handleJoinFromOutside=e=>{i||(o(!0),a(e),setTimeout(()=>o(!1),2e3))},{players:h,spots:m,gameCost:b,cases:u,id:p}=t;return(0,l.jsxs)("div",{...r,className:Z().battleItem,children:[(0,l.jsxs)("div",{className:Z().robuxPart,children:[(0,l.jsxs)("div",{className:Z().battlePrice,children:[(0,l.jsx)(f.Z,{}),(0,l.jsx)("p",{children:(0,d.s)(b)})]}),(0,l.jsxs)("p",{children:["Cases: ",u.length]})]}),(0,l.jsx)("div",{className:Z().casesPart,children:(0,l.jsx)("div",{className:Z().previewsHolder,children:u.map(e=>{let{id:t,thumbnailUrl:a}=e;return(0,l.jsx)("div",{style:{backgroundImage:"url(".concat(a,")")},className:Z().previewBox},t)})})}),(0,l.jsx)("div",{className:Z().playersPart,children:(()=>{var e,t,a,s,r,n,i,c,o,d;if(2===m){let a=[];for(let s=0;s<m;s++)a.push(h[s]?(0,l.jsxs)("div",{className:Z().player,children:[(0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(e=h[s])||void 0===e?void 0:e.id,boxSize:"small"},Math.floor(1e6*Math.random())),(0,l.jsx)(L.Z,{textType:"label",children:null===(t=h[s])||void 0===t?void 0:t.displayName})]},s):(0,l.jsxs)("div",{className:Z().player,children:[(0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,isEmpty:!0,boxSize:"small"},Math.floor(1e6*Math.random())),(0,l.jsx)(L.Z,{textType:"label",className:Z().darkGrey,children:"Free Spot"})]},s));return a}if(3===m){let e=[],t=[],r=[];for(let e=0;e<m;e++)0===e?t.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(a=h[e])||void 0===a?void 0:a.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random()))):r.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(s=h[e])||void 0===s?void 0:s.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random())));return e.push((0,l.jsxs)("div",{className:Z().onePlayer,children:[(0,l.jsx)("div",{children:t}),(0,l.jsxs)(L.Z,{textType:"label",children:[h.length," players"]})]},Math.floor(1e6*Math.random()))),e.push((0,l.jsxs)("div",{className:Z().twoPlayers,children:[(0,l.jsx)("div",{children:r}),(0,l.jsxs)(L.Z,{textType:"label",className:Z().darkGrey,children:[" ",m-h.length," free spots"]})]},Math.floor(1e6*Math.random()))),e}if(4===m){let e=[],t=[],a=[];for(let e=0;e<m;e++)0===e||1===e?t.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(r=h[e])||void 0===r?void 0:r.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random()))):a.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(n=h[e])||void 0===n?void 0:n.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random())));return e.push((0,l.jsxs)("div",{className:Z().twoPlayers,children:[(0,l.jsx)("div",{children:t}),(0,l.jsxs)(L.Z,{textType:"label",children:[h.length," players"]})]},Math.floor(1e6*Math.random()))),e.push((0,l.jsxs)("div",{className:Z().twoPlayers,children:[(0,l.jsx)("div",{children:a}),(0,l.jsxs)(L.Z,{textType:"label",className:Z().darkGrey,children:[" ",m-h.length," free spots"]})]},Math.floor(1e6*Math.random()))),e}if(5===m){let e=[],t=[],a=[];for(let e=0;e<m;e++)0===e||1==e?t.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(i=h[e])||void 0===i?void 0:i.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random()))):a.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(c=h[e])||void 0===c?void 0:c.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random())));return e.push((0,l.jsxs)("div",{className:Z().twoPlayers,children:[(0,l.jsx)("div",{children:t}),(0,l.jsxs)(L.Z,{textType:"label",children:[" ",h.length," players"]})]},Math.floor(1e6*Math.random()))),e.push((0,l.jsxs)("div",{className:Z().threePlayers,children:[(0,l.jsx)("div",{children:a}),(0,l.jsxs)(L.Z,{textType:"label",className:Z().darkGrey,children:[" ",m-h.length," free spots"]})]},Math.floor(1e6*Math.random()))),e}if(6===m){let e=[],t=[],a=[];for(let e=0;e<m;e++)0===e||1===e||2===e?t.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(o=h[e])||void 0===o?void 0:o.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random()))):a.push((0,l.jsx)(I.Z,{background:"rgba(38, 50, 66, 0.9)",className:Z().avatarComp,userId:null===(d=h[e])||void 0===d?void 0:d.id,isEmpty:!h[e],boxSize:"small"},Math.floor(1e6*Math.random())));return e.push((0,l.jsxs)("div",{className:Z().threePlayers,children:[(0,l.jsx)("div",{children:t}),(0,l.jsxs)(L.Z,{textType:"label",children:[" ",h.length," players"]})]},Math.floor(1e6*Math.random()))),e.push((0,l.jsxs)("div",{className:Z().threePlayers,children:[(0,l.jsx)("div",{children:a}),(0,l.jsxs)(L.Z,{textType:"label",className:Z().darkGrey,children:[" ",m-h.length," free spots"]})]},Math.floor(1e6*Math.random()))),e}})()}),(0,l.jsxs)("div",{className:Z().controlsPart,children:[(0,l.jsx)(c(),{href:"/case-battles/".concat(p),children:(0,l.jsxs)(j.Z,{className:n()(Z().viewBtn,Z().btn),children:[(0,l.jsx)(S.Z,{}),"View"]})}),h.length>=m?(0,l.jsxs)(j.Z,{disabled:!0,onClick:()=>handleJoinFromOutside(p),className:n()(Z().fullBtn,Z().btn),children:[(0,l.jsxs)("div",{className:Z().leftPart,children:[(0,l.jsx)(btn_user,{}),(0,l.jsxs)("span",{children:[h.length,"/",m]})]}),(0,l.jsx)("span",{children:"Full"})]}):(0,l.jsxs)(j.Z,{onClick:()=>handleJoinFromOutside(p),disabled:i||s||h.length>=m,className:n()(Z().joinBtn,Z().btn,{[Z().disabled]:i}),children:[(0,l.jsxs)("div",{className:Z().leftPart,children:[(0,l.jsx)(btn_user,{}),(0,l.jsxs)("span",{children:[h.length,"/",m]})]}),(0,l.jsx)("span",{children:"Join"})]})]})]})},M=a(896),B=a(4641);let A={name:"Case Battles",info:"Players open cases containing random items. The one with the highest total Robux value from these items wins the prize pool!"};function CaseBattles(){let e=(0,o.useRouter)(),t=(0,v.L)(e=>e.globalUser),a=_.useMemo(()=>(0,B.P)("margin"),["margin"]),s=(0,v.a)(e=>e.setShowModal),[r,i]=(0,_.useState)([]),[m,b]=(0,_.useState)(!1),u=(0,v.a)(e=>e.setShowLogin),[x,g]=(0,_.useState)(null),[j,C]=(0,_.useState)({tabName:"Multiplayer",tabNumber:0}),fetchData=async()=>{try{let e=await (0,M.Uk)("case-battles");i(e.data)}catch(e){h.ZP.error("Failed to fetch case battles, please refresh")}},handleAddMember=async e=>{let{battleId:t,player:a}=e;try{i(e=>{let s=[...e],l=s.findIndex(e=>{let{id:a}=e;return a===t});return s[l]?(s[l].players.push(a),s):e})}catch(e){console.log("Failed to fetch members, please refresh")}},fetchCases=async()=>{try{let e=await (0,M.wL)();g(e)}catch(e){h.ZP.error("Failed to fetch cases, please refresh")}};(0,_.useEffect)(()=>{try{fetchCases(),fetchData(),y.Wb.emit("JOIN-ROOM","GENERAL_CASE_BATTLES"),y.Wb.on("NEW_CASE_BATTLE",e=>{i(t=>[e,...t])}),y.Wb.on("ADD_MEMBER",e=>{handleAddMember(e)}),y.Wb.on("REMOVE_BATTLE",e=>{i(t=>t.filter(t=>{let{id:a}=t;return a!==e}))})}catch(e){h.ZP.error("Something went wrong...")}return()=>{y.Wb.off("NEW_CASE_BATTLE"),y.Wb.off("ADD_MEMBER"),y.Wb.off("REMOVE_BATTLE"),y.Wb.emit("LEAVE-ROOM","GENERAL_CASE_BATTLES")}},[]);let joinFromOutside=a=>{(null==t?void 0:t.id)?e.push("/case-battles/".concat(a)):u({forceUserPass:!1,visible:!0})};return r?(0,l.jsxs)("div",{className:"battle-list",children:[(0,l.jsx)(CreateCoinflipBattle,{cases:x}),(0,l.jsx)(E.Z,{gameInfo:A.info,gameName:A.name,withButtons:!1,gameBanner:void 0,isAdmin:!1,refundData:{gameMode:"CASES",battleId:0}}),(0,l.jsx)(P.Z,{setShowJoinable:b,showJoinable:m,battlesCount:r.length,gameName:"Case Battle",setCurrentTab:C,currentTab:j,handleCreateBattle:function(){s("createCoinflipBattle",!0),setTimeout(()=>{document.body.style.overflow="hidden",document.body.style.paddingRight=a.gap+"px"},0)}}),"SinglePlayer"===j.tabName?(0,l.jsx)("div",{className:Z().singlePlayerSection,children:x&&x.sort((e,t)=>e.price-t.price).map((e,t)=>{let{id:a,thumbnailUrl:s,price:r,name:i}=e;return(0,l.jsxs)(c(),{style:{animation:"bottomTop ".concat(.2+.15*t,"s")},className:n()(Z().eachCase,Z().activeCase,Z().singleCaseItem),href:"/case-battles/single-player/".concat(a),children:[(0,l.jsx)(p.Z,{className:Z().caseImg,shadowColor:"#2967E0",imgUrl:s}),(0,l.jsx)("p",{className:Z().caseName,children:i}),(0,l.jsxs)("span",{className:Z().casePriceWrapper,children:[(0,l.jsx)(f.Z,{}),(0,l.jsx)("p",{children:(0,d.s)(r)})]})]},a)})}):(0,l.jsx)(l.Fragment,{children:r.length?(0,l.jsx)("div",{className:Z().caseBattleItemWrapper,children:(m?r.filter(e=>{let{spots:t,players:a}=e;return a.length<t}):r).map((e,t)=>{let{price:a,id:s,spots:r,players:n,casesIncluded:i}=e;return(0,l.jsx)(battle_item,{isFull:!1,style:{animation:"bottomTop ".concat(.2+.15*t,"s")},handleJoinFromOutside:joinFromOutside,gameData:{gameCost:a,id:s,players:n,spots:r,cases:i}},s)})}):(0,l.jsxs)("h1",{className:"empty-state-battle",children:["There are no battles right now, you can create one in top right"," "]})})]}):(0,l.jsx)("h1",{children:"\uD83D\uDEE0BATTLE NOT FOUND, THIS IS MAYBE BECAUSE IT WAS DELETED... \uD83D\uDEA7"})}CaseBattles.getLayout=e=>(0,l.jsx)(m.Z,{children:e})},6654:function(e){e.exports={switcher:"switch_switcher__xpE_s"}},4156:function(e){e.exports={gameInfoWrapper:"battleList_gameInfoWrapper__d69XJ",gameInfoLeft:"battleList_gameInfoLeft__s1upM",gameInfoLeftBanner:"battleList_gameInfoLeftBanner__Czm6s",bottomTop:"battleList_bottomTop__blmpC","Mines-thumbnail":"battleList_Mines-thumbnail__fuH_0","Stairs-thumbnail":"battleList_Stairs-thumbnail__T5ZKL","Triple-thumbnail":"battleList_Triple-thumbnail__5d9ra","Ludo-thumbnail":"battleList_Ludo-thumbnail__GApsg","Case-Battles-thumbnail":"battleList_Case-Battles-thumbnail__WusFV","Coinflip-thumbnail":"battleList_Coinflip-thumbnail__zQWyg","Towers-thumbnail":"battleList_Towers-thumbnail__dr6p_",gameInfoLeftText:"battleList_gameInfoLeftText__APTUm",gameInfoRight:"battleList_gameInfoRight__h98_S",cashoutBtn:"battleList_cashoutBtn____QiR",filterWrapper:"battleList_filterWrapper__rl1ue",filterWrapperLeft:"battleList_filterWrapperLeft__bYtj1",filterWrapperLeftSwitchWrapper:"battleList_filterWrapperLeftSwitchWrapper__G_Qpe",filterWrapperRight:"battleList_filterWrapperRight__zaTTw",filterWrapperRightBtn:"battleList_filterWrapperRightBtn__f7D_X",battleItem:"battleList_battleItem__k2w5_",battleItemInfoPart:"battleList_battleItemInfoPart__wEoso",battleItemInfoPartCost:"battleList_battleItemInfoPartCost__68qcc",minesUnique:"battleList_minesUnique__fM8FE",gameIcon:"battleList_gameIcon__9pg_7",bomb:"battleList_bomb__12ptX",battleItemPlayersPart:"battleList_battleItemPlayersPart__vSyZ8",player:"battleList_player__duysR",threePlayers:"battleList_threePlayers__pJfR2",twoPlayers:"battleList_twoPlayers__K9gNI",onePlayer:"battleList_onePlayer__vf_Zt",avatarComp:"battleList_avatarComp__lO7ES",battleItemJoinPart:"battleList_battleItemJoinPart__jqqEH",battleItemJoinPartView:"battleList_battleItemJoinPartView__N56MV",battleItemJoinPartJoin:"battleList_battleItemJoinPartJoin___m4Xc",filterWrapperV2:"battleList_filterWrapperV2__naS7I",tabsContainer:"battleList_tabsContainer__NdE7A",filled:"battleList_filled__KgnFo",greenDot:"battleList_greenDot__Zg4c6",greyDot:"battleList_greyDot__Krrch",btn:"battleList_btn__I_5XT",yourTurnDropAnimation:"battleList_yourTurnDropAnimation__azU3H",yourTurnProgress:"battleList_yourTurnProgress__Zl1PK",slideUp:"battleList_slideUp__G85jf",fade:"battleList_fade__8z81f",animateCircleStroke:"battleList_animateCircleStroke__MGVts",shake:"battleList_shake__bvhFt",stoneDrop:"battleList_stoneDrop__myHeI"}},5005:function(e){e.exports={caseBattleItemWrapper:"casebattle_caseBattleItemWrapper__ijq24",battleItem:"casebattle_battleItem__9UPAP",robuxPart:"casebattle_robuxPart__LDO9R",battlePrice:"casebattle_battlePrice__wRKzJ",casesPart:"casebattle_casesPart__KqbTJ",previewsHolder:"casebattle_previewsHolder__ushmM",previewBox:"casebattle_previewBox__BLtYj",playersPart:"casebattle_playersPart__gX55D",controlsPart:"casebattle_controlsPart__nYR_g",btn:"casebattle_btn__bSiEq",viewBtn:"casebattle_viewBtn__l8cZZ",joinBtn:"casebattle_joinBtn__tbUuF",leftPart:"casebattle_leftPart__genm6",fullBtn:"casebattle_fullBtn__e_t0p",player:"casebattle_player__WTr9_",threePlayers:"casebattle_threePlayers__UwVqu",twoPlayers:"casebattle_twoPlayers__HUNH6",onePlayer:"casebattle_onePlayer__PaX47",avatarComp:"casebattle_avatarComp__tnoRP",darkGrey:"casebattle_darkGrey__R1ztX",insideBattle:"casebattle_insideBattle__HttTL",gameOver:"casebattle_gameOver__TfWyn",bgSquare:"casebattle_bgSquare__o8vdw",contentAndGlow:"casebattle_contentAndGlow__lbQBi",glowSvg:"casebattle_glowSvg__ZduED",content:"casebattle_content__Rw6HQ",teamsContainer:"casebattle_teamsContainer__miFJI",side:"casebattle_side__S2olF",winnerPlayer:"casebattle_winnerPlayer__Gp0Pa",vs:"casebattle_vs___Plr1",casesPreview:"casebattle_casesPreview__opSOQ",casesWrapper:"casebattle_casesWrapper__9C54I",normalPlayers:"casebattle_normalPlayers__iaMbS",slotAndUser:"casebattle_slotAndUser___e2rU",userWinnings:"casebattle_userWinnings__zdWFy",user:"casebattle_user___8EYL",userInfo:"casebattle_userInfo__GNks_",username:"casebattle_username__yvK_F",battleBalance:"casebattle_battleBalance__PmPjA",winningsContainer:"casebattle_winningsContainer__MViTI",singleWinningItem:"casebattle_singleWinningItem__mHI8F",emptyRound:"casebattle_emptyRound__4jqDg",assetName:"casebattle_assetName__4Gw6N",price:"casebattle_price__s9duM",oneVone:"casebattle_oneVone__Tcxy1",oneVoneVone:"casebattle_oneVoneVone__7hwKE",twoVtwo:"casebattle_twoVtwo__Fu2ja",VSContainer:"casebattle_VSContainer__lJxP_",shadowImgContainer:"casebattle_shadowImgContainer__pOSLc",shadow:"casebattle_shadow__M_t0o",actualImg:"casebattle_actualImg___OFMi",horzParent1:"casebattle_horzParent1__fJGtF",vertparent1:"casebattle_vertparent1__WaOnI",slotParent1:"casebattle_slotParent1__dqttT",slotParent2:"casebattle_slotParent2__0wY1G",slotParent3:"casebattle_slotParent3__hYu_h",slotParent4:"casebattle_slotParent4__nUHyx",cardItem:"casebattle_cardItem__xHDbd",verticalStuff:"casebattle_verticalStuff__P1lIR",eachCase:"casebattle_eachCase__k5zTH",caseImg:"casebattle_caseImg___730G",caseName:"casebattle_caseName__W3ZU_",casePriceWrapper:"casebattle_casePriceWrapper__9WFth",activeCase:"casebattle_activeCase__WdvB7",singlePlayerSection:"casebattle_singlePlayerSection__SgUDS",singleCaseItem:"casebattle_singleCaseItem__e3n51"}}},function(e){e.O(0,[83,462,392,774,888,179],function(){return e(e.s=6870)}),_N_E=e.O()}]);